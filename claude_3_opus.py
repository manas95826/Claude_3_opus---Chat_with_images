# -*- coding: utf-8 -*-
"""Claude 3 Opus.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/175X_1_uSXd0P0tF5a0Rz0nPutp97z5GL
"""

!pip install -q anthropic

import os
from google.colab import userdata

os.environ['ANTHROPIC_API_KEY']=userdata.get('ANTHROPIC_API_KEY')

import anthropic
client = anthropic.Anthropic()

from IPython.display import Image, display
import base64
import httpx

image_url="https://www.pexels.com/photo/man-in-yellow-crew-neck-t-shirt-with-skin-problem-5304819/"

image_media_type="image/jpeg"

image_data=base64.b64decode(httpx.get(image_url).content).decode("iso-8859-1")

display(image_data)

display(Image(url=f"data:image/jpeg:base64,{image_data}"))

import base64

image_path = '/content/pexels-photo-674010.jpeg'

with open(image_path, "rb") as image_file:
    image_data = base64.b64encode(image_file.read()).decode('utf-8')

message = client.messages.create(
    model="claude-3-opus-20240229",
    max_tokens=1024,
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "image",
                    "source": {
                        "type": "base64",
                        "media_type": "image/jpeg",  # Update with the correct media type if needed
                        "data": image_data,
                    },
                },
                {
                    "type": "text",
                    "text": "Can you derive some insights from the image?",
                }
            ],
        }
    ],
)
print(message)

